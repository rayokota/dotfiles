Compression yes
 
# Allow connection sharing for faster login
ControlMaster auto
ControlPersist 8h
ControlPath ~/.ssh/mux-%r@%h:%p
 
Host github.com
  ControlMaster no

Host *
  AddKeysToAgent yes
  UseKeychain yes
  IdentityFile ~/.ssh/id_rsa

Host *.cpdev.cloud *.confluent.cloud
  User $USER
  StrictHostKeyChecking no
  UserKnownHostsFile /dev/null
  IdentityFile ~/.ssh/caas-%u
  ServerAliveInterval 60

Host packaging
  User ubuntu
  HostName ec2-54-226-75-200.compute-1.amazonaws.com
  IdentityFile ~/.ssh/aws-ryokota.pem
  ForwardAgent yes
 
Host packaging2
  User ubuntu
  HostName ec2-54-174-136-166.compute-1.amazonaws.com
  IdentityFile ~/.ssh/aws-ryokota.pem
  ForwardAgent yes
 
# Do to an SSH Bug on the version used on the Jumphost, to make this work we
# need to ssh into the jumphost first
#
#   ssh jumphost
#
# close the connection, which will remain as it is persisted for 3h and then
# ssh into any box using the jumphost
#
#   ssh stagefetch-1.az1.bl2.yammer.com
#
# Otherwise we receive a `Bad packet length 1397966893.` see
# https://groups.google.com/forum/#!topic/mailing.unix.openssh-dev/4Dc6LNnmA90
Host jumphost
  User ryokota
  ProxyCommand none
  ForwardAgent yes
  Hostname jumphost.bl2.yammer.com
  # Don't set ControlMaster, see http://serverfault.com/questions/447055/ssh-multi-hop-connections-with-netcat-mode-proxy
  ControlMaster no
 
Host *.bl2.yammer.com
  User ryokota
  ForwardAgent yes
  ProxyCommand ssh -q -t -t jumphost nc %h %p
